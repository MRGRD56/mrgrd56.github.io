{"version":3,"file":"static/js/7001.e369dc4e.chunk.js","mappings":"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","sources":["hooks/debouncedMemo.ts","webpack://mrgrd56.github.io/./src/pages/bgGeneratorPage/BgGeneratorPage.module.scss?56cf","utils/stringifySize.ts","utils/getWindowSize.ts","pages/bgGeneratorPage/BgGeneratorPage.tsx","utils/getScaledScreenSize.ts","utils/getScreenSize.ts"],"sourcesContent":["import { DependencyList, useEffect, useRef, useState } from 'react';\nimport { debounce, isObject, throttle } from 'lodash';\nimport { v4 } from 'uuid';\nimport call from '../utils/call';\nimport useAutoRef from './useAutoRef';\n\ninterface NoResult {\n    readonly _noResult: string;\n}\n\nconst isNoResult = <T>(value: T | NoResult, noResult: NoResult): value is NoResult => {\n    return isObject(value) && '_noResult' in value && value === noResult; //TODO just value === noResult ?\n};\n\ntype MemoFactory<R> = (noResult: NoResult) => R | NoResult;\n\nconst createDebouncedMemoHook =\n    (debounceFn: typeof debounce) =>\n    <R>(factory: MemoFactory<R>, deps: DependencyList | undefined, wait?: number) => {\n        const [value, setValue] = useState<R>();\n        const factoryRef = useAutoRef(factory);\n\n        const debounceFunction = useRef(\n            call(() => {\n                const actualNoResult: NoResult = Object.freeze({\n                    _noResult: v4()\n                });\n\n                return debounceFn(() => {\n                    const value = factoryRef.current(actualNoResult);\n\n                    if (!isNoResult(value, actualNoResult)) {\n                        setValue(value);\n                    }\n                }, wait);\n            })\n        ).current;\n\n        useEffect(() => {\n            debounceFunction();\n        }, deps);\n\n        return value;\n    };\n\nexport const useDebouncedMemo = createDebouncedMemoHook(debounce);\nexport const useThrottledMemo = createDebouncedMemoHook(throttle);\n\n// const useDebouncedMemo = <T>(factory: () => T, deps: DependencyList | undefined, wait?: number) => {\n//     const [value, setValue] = useState<T>();\n//\n//     const timeoutRef = useRef<NodeJS.Timeout>();\n//\n//\n// };\n","// extracted by mini-css-extract-plugin\nexport default {\"antd-text-primary\":\"BgGeneratorPage_antd-text-primary__e4nyv\",\"resultImage\":\"BgGeneratorPage_resultImage__M-RJS\",\"sizeButtonsContainer\":\"BgGeneratorPage_sizeButtonsContainer__EJ6-H\"};","import { Size } from '../types';\n\nconst stringifySize = ({ width, height }: Size): string => `${width}x${height}`;\n\nexport default stringifySize;\n","import { Size } from '../types';\n\nconst getWindowSize = (): Size => {\n    const { innerWidth, innerHeight } = window;\n\n    return {\n        width: innerWidth,\n        height: innerHeight\n    };\n};\n\nexport default getWindowSize;\n","import React, { useCallback, useRef, useState } from 'react';\nimport styles from './BgGeneratorPage.module.scss';\nimport PageContainer from '../../layouts/pages/pageContainer/PageContainer';\nimport ExternalLink from '../../components/ExternalLink';\nimport { Button, Col, Image, InputNumber, Row, Space } from 'antd';\nimport { Size } from '../../types';\nimport getScaledScreenSize from '../../utils/getScaledScreenSize';\nimport { ColorChangeHandler, SketchPicker } from 'react-color';\nimport stringifySize from '../../utils/stringifySize';\nimport { useDebouncedMemo } from '../../hooks/debouncedMemo';\nimport getWindowSize from '../../utils/getWindowSize';\nimport getScreenSize from '../../utils/getScreenSize';\nimport './BgGeneratorPage.scss';\n\nconst generateImage = ({ width, height }: Size, color: string, imgCanvas: HTMLCanvasElement): string | undefined => {\n    if (width < 0 || height < 0) {\n        return;\n    }\n\n    const imgCanvasContext = imgCanvas.getContext('2d');\n\n    if (!imgCanvasContext) {\n        return;\n    }\n\n    imgCanvas.width = width;\n    imgCanvas.height = height;\n    imgCanvasContext.fillStyle = color;\n    imgCanvasContext.fillRect(0, 0, width, height);\n    return imgCanvas.toDataURL('image/png');\n};\n\nconst BgGeneratorPage = () => {\n    const imgCanvasRef = useRef<HTMLCanvasElement>(null);\n\n    const [size, setSize] = useState<Size>(getScaledScreenSize());\n    const [color, setColor] = useState<string>('#42a5f5');\n    const imgSource = useDebouncedMemo(\n        () => {\n            if (!imgCanvasRef.current) {\n                return;\n            }\n\n            return generateImage(size, color, imgCanvasRef.current);\n        },\n        [size, color],\n        50\n    );\n\n    const handleColorChange = useCallback<ColorChangeHandler>(({ rgb }) => {\n        const { r, g, b, a } = rgb;\n        setColor(`rgba(${r}, ${g}, ${b}, ${a})`);\n    }, []);\n\n    const handleSizeChange = useCallback(\n        (sizeKey: keyof Size) => (value: number) => {\n            setSize((currentSize) => ({\n                ...currentSize,\n                [sizeKey]: value\n            }));\n        },\n        []\n    );\n\n    const handleUseSize = (sizeFunction: () => Size) => () => {\n        setSize(sizeFunction());\n    };\n\n    return (\n        <PageContainer\n            title=\"Background Generator\"\n            description=\"Generates a simple background of the specified size and color\"\n            titleExtra={\n                <ExternalLink href=\"https://mrgrd56.github.io/bg-generator\">Check out old version</ExternalLink>\n            }\n        >\n            <canvas className=\"d-none\" ref={imgCanvasRef} />\n            <Col>\n                <Row gutter={16}>\n                    <Col className=\"mb-3\">\n                        <SketchPicker\n                            color={color}\n                            onChange={handleColorChange}\n                            className=\"BgGeneratorPage_color-picker\"\n                        />\n                    </Col>\n                    <Col className=\"mb-3\">\n                        <Space direction=\"vertical\">\n                            <Row gutter={10} align=\"middle\">\n                                <Col span={8}>\n                                    <label htmlFor=\"width-input\">Width</label>\n                                </Col>\n                                <Col>\n                                    <InputNumber\n                                        id=\"width-input\"\n                                        value={size.width}\n                                        onChange={handleSizeChange('width')}\n                                    />\n                                </Col>\n                            </Row>\n                            <Row gutter={10} align=\"middle\">\n                                <Col span={8}>\n                                    <label htmlFor=\"height-input\">Height</label>\n                                </Col>\n                                <Col>\n                                    <InputNumber\n                                        id=\"height-input\"\n                                        value={size.height}\n                                        onChange={handleSizeChange('height')}\n                                    />\n                                </Col>\n                            </Row>\n                            <Row className={styles.sizeButtonsContainer}>\n                                <Button onClick={handleUseSize(getScaledScreenSize)}>\n                                    Use scaled screen size {stringifySize(getScaledScreenSize())}\n                                </Button>\n                                <Button onClick={handleUseSize(getScreenSize)}>\n                                    Use screen size {stringifySize(getScreenSize())}\n                                </Button>\n                                <Button onClick={handleUseSize(getWindowSize)}>\n                                    Use window size {stringifySize(getWindowSize())}\n                                </Button>\n                            </Row>\n                        </Space>\n                    </Col>\n                </Row>\n                <Col>\n                    <Image src={imgSource} className={styles.resultImage} />\n                </Col>\n            </Col>\n        </PageContainer>\n    );\n};\n\nexport default BgGeneratorPage;\n","import { Size } from '../types';\nimport { round } from 'lodash';\n\nconst getScaledScreenSize = (): Size => {\n    const { devicePixelRatio } = window;\n    const { width, height } = window.screen;\n\n    return {\n        width: round(width * devicePixelRatio),\n        height: round(height * devicePixelRatio)\n    };\n};\n\nexport default getScaledScreenSize;\n","import { Size } from '../types';\nimport { pick } from 'lodash';\n\nconst getScreenSize = (): Size => pick(window.screen, ['width', 'height']);\n\nexport default getScreenSize;\n"],"names":["createDebouncedMemoHook","debounceFn","factory","deps","wait","useState","value","setValue","factoryRef","useAutoRef","debounceFunction","useRef","call","actualNoResult","Object","freeze","_noResult","v4","current","noResult","isObject","isNoResult","useEffect","useDebouncedMemo","debounce","throttle","width","height","window","innerWidth","innerHeight","imgCanvasRef","getScaledScreenSize","size","setSize","color","setColor","imgSource","imgCanvas","imgCanvasContext","getContext","fillStyle","fillRect","toDataURL","generateImage","handleColorChange","useCallback","rgb","r","g","b","a","handleSizeChange","sizeKey","currentSize","handleUseSize","sizeFunction","PageContainer","title","description","titleExtra","ExternalLink","href","className","ref","gutter","onChange","direction","align","span","htmlFor","id","styles","onClick","stringifySize","getScreenSize","getWindowSize","src","devicePixelRatio","screen","round","pick"],"sourceRoot":""}