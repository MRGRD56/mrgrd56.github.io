{"version":3,"file":"static/js/4793.b0e208cf.chunk.js","mappings":"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","sources":["components/NpmLink.tsx","hooks/useStateChangeByEventHandler.ts","pages/jsEvaluatorPage/types/OutputMode.ts","webpack://mrgrd56.github.io/./src/pages/jsEvaluatorPage/JsEvaluatorPage.module.scss?7728","utils/monaco/monacoExtraLibs.ts","webpack://mrgrd56.github.io/./src/components/labeledSwitch/LabeledSwitch.module.scss?3774","components/labeledSwitch/LabeledSwitch.tsx","components/jsObjectViewer/JsObjectViewer.tsx","pages/jsEvaluatorPage/JsEvaluatorPage.tsx","utils/getNpmPackageLink.ts","utils/processRef.ts","utils/scopedEval.ts"],"sourcesContent":["import React, { FunctionComponent, ReactNode } from 'react';\nimport ExternalLink from './ExternalLink';\nimport getNpmPackageLink from '../utils/getNpmPackageLink';\n\ninterface Props {\n    packageName: string;\n    plain?: boolean;\n    children?: ReactNode;\n}\n\nconst NpmLink: FunctionComponent<Props> = ({ packageName, plain, children }) => {\n    const link = getNpmPackageLink(packageName);\n\n    const text = children || packageName;\n\n    return <ExternalLink href={link}>{plain ? text : <code>{text}</code>}</ExternalLink>;\n};\n\nexport default React.memo(NpmLink);\n","import React, { Dispatch, SetStateAction, useCallback } from 'react';\n\nexport const handleEventTargetValueChange =\n    <S>(callback: (value: S) => void) =>\n    (event: React.ChangeEvent<{ value: S }>) => {\n        callback(event.target.value);\n    };\n\nconst useStateChangeByEventHandler = <S>(setState: Dispatch<SetStateAction<S>>) => {\n    return useCallback(handleEventTargetValueChange(setState), [setState]);\n};\n\nexport default useStateChangeByEventHandler;\n","enum OutputMode {\n    VIEW = 'VIEW',\n    TEXT = 'TEXT',\n    HTML = 'HTML',\n    TABLE = 'TABLE',\n    CONSOLE = 'CONSOLE'\n}\n\nexport default OutputMode;\n","// extracted by mini-css-extract-plugin\nexport default {\"antd-text-primary\":\"JsEvaluatorPage_antd-text-primary__Sv4cd\",\"container\":\"JsEvaluatorPage_container__uj24J\",\"outputModeComboBox\":\"JsEvaluatorPage_outputModeComboBox__YHsN+\",\"textarea\":\"JsEvaluatorPage_textarea__YDFfH\",\"valueContainer\":\"JsEvaluatorPage_valueContainer__ND2pL\",\"codeContainer\":\"JsEvaluatorPage_codeContainer__bHlmZ\",\"codeEditorContainer\":\"JsEvaluatorPage_codeEditorContainer__IxTia\",\"codeEditor\":\"JsEvaluatorPage_codeEditor__i7eEW\",\"resultContainerWrapper\":\"JsEvaluatorPage_resultContainerWrapper__sphP8\",\"resultContainer\":\"JsEvaluatorPage_resultContainer__-1ajm\"};","import { Monaco } from '@monaco-editor/react';\n\ntype AddLibrary = (monaco: Monaco) => Promise<void>;\n\nconst createAddTypes = (monaco: Monaco) => {\n    const add = (contents: string, typesLocation?: string): void => {\n        monaco.languages.typescript.javascriptDefaults.addExtraLib(contents, typesLocation);\n    };\n\n    const addLibrary = async (importedTypes: Promise<RawLoaded>, typesLocation: string): Promise<void> => {\n        add((await importedTypes).default, typesLocation);\n    };\n\n    addLibrary.custom = add;\n\n    return addLibrary;\n};\n\nclass MonacoExtraLibs {\n    lodash: AddLibrary = async (monaco) => {\n        const addTypes = createAddTypes(monaco);\n        await addTypes(import('!raw-loader!@types/lodash/index.d.ts'), '@types/lodash/index.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/common.d.ts'), '@types/lodash/common/common.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/array.d.ts'), '@types/lodash/common/array.d.ts');\n        await addTypes(\n            import('!raw-loader!@types/lodash/common/collection.d.ts'),\n            '@types/lodash/common/collection.d.ts'\n        );\n        await addTypes(import('!raw-loader!@types/lodash/common/date.d.ts'), '@types/lodash/common/date.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/function.d.ts'), '@types/lodash/common/function.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/lang.d.ts'), '@types/lodash/common/lang.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/math.d.ts'), '@types/lodash/common/math.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/number.d.ts'), '@types/lodash/common/number.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/object.d.ts'), '@types/lodash/common/object.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/seq.d.ts'), '@types/lodash/common/seq.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/string.d.ts'), '@types/lodash/common/string.d.ts');\n        await addTypes(import('!raw-loader!@types/lodash/common/util.d.ts'), '@types/lodash/common/util.d.ts');\n    };\n    axios: AddLibrary = async (monaco) => {\n        const addTypes = createAddTypes(monaco);\n        // await addTypes(import('!raw-loader!axios/index.d.ts'), 'axios/index.d.ts');\n        // TODO\n        addTypes.custom(`\n        declare const axios: any;\n        `);\n    };\n    pluralize: AddLibrary = async (monaco) => {\n        const addTypes = createAddTypes(monaco);\n        await addTypes(import('!raw-loader!@types/pluralize/index.d.ts'), '@types/pluralize/index.d.ts');\n    };\n\n    moment: AddLibrary = async (monaco) => {\n        const addTypes = createAddTypes(monaco);\n        // await addTypes(import('!raw-loader!moment/moment.d.ts'), 'moment/moment.d.ts');\n        addTypes.custom(`\n        declare const moment: any;\n        `);\n    };\n}\n\nconst monacoExtraLibs = new MonacoExtraLibs();\n\nexport default monacoExtraLibs;\n","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"LabeledSwitch_label__MlNG1\"};","import React, { CSSProperties, FunctionComponent, HTMLProps, useMemo } from 'react';\nimport { Switch, SwitchProps } from 'antd';\nimport { omit, pick } from 'lodash';\nimport styles from './LabeledSwitch.module.scss';\nimport classNames from 'classnames';\n\ninterface Props\n    extends Omit<HTMLProps<HTMLLabelElement>, 'onChange' | 'onClick' | 'size' | 'label'>,\n        Omit<SwitchProps, 'className' | 'style'> {\n    switchClassName?: string;\n    switchStyle?: CSSProperties;\n}\n\nconst realSwitchPropsNames = [\n    'prefixCls',\n    'size',\n    'checked',\n    'defaultChecked',\n    'onChange',\n    'onClick',\n    'checkedChildren',\n    'unCheckedChildren',\n    'disabled',\n    'loading',\n    'autoFocus',\n    'title',\n    'tabIndex',\n    'id'\n] as const;\n\nconst switchPropNames = [...realSwitchPropsNames, 'switchClassName', 'switchStyle'] as const;\n\nconst LabeledSwitch: FunctionComponent<Props> = ({ children, ...props }) => {\n    const { switchProps, labelProps } = useMemo(() => {\n        return {\n            switchProps: {\n                ...pick(props, realSwitchPropsNames),\n                className: classNames(styles.switch, props.switchClassName),\n                style: props.switchStyle\n            },\n            labelProps: {\n                ...omit(props, switchPropNames),\n                className: classNames(styles.label, props.className)\n            }\n        };\n    }, [props]);\n\n    return (\n        <label {...labelProps}>\n            <Switch {...switchProps} />\n            {children}\n        </label>\n    );\n};\n\nexport default LabeledSwitch;\n","import React, { HTMLProps, ReactElement, useEffect, useRef } from 'react';\nimport { useDidMount } from 'rooks';\nimport LunaObjectViewer from 'luna-object-viewer';\nimport useAppTheme from '../../hooks/useAppTheme';\nimport processRef from '../../utils/processRef';\n\ninterface Props extends Omit<HTMLProps<HTMLDivElement>, 'value' | 'children'> {\n    value: unknown;\n}\n\nconst JsObjectViewer = ({ value, ...props }: Props): ReactElement => {\n    const { isDarkMode } = useAppTheme();\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const objectViewerRef = useRef<LunaObjectViewer>();\n\n    useDidMount(() => {\n        const container = containerRef.current;\n        if (!container) {\n            throw new Error('Cannot initialize JsObjectViewer: No container');\n        }\n\n        objectViewerRef.current = new LunaObjectViewer(container, {\n            theme: isDarkMode ? 'dark' : 'light',\n            accessGetter: true,\n            unenumerable: true\n        });\n    });\n\n    useEffect(() => {\n        processRef(objectViewerRef, (objectViewer) => {\n            objectViewer.set(value);\n        });\n    }, [value]);\n\n    useEffect(() => {\n        processRef(objectViewerRef, (objectViewer) => {\n            objectViewer.setOption('theme', isDarkMode ? 'dark' : 'light');\n        });\n    }, [isDarkMode]);\n\n    return <div ref={containerRef} {...props} />;\n};\n\nexport default JsObjectViewer;\n","import React, { MutableRefObject, useCallback, useEffect, useState } from 'react';\nimport PageContainer from '../../layouts/pages/pageContainer/PageContainer';\nimport { Button, Col, notification, Row, Select, Spin, Tooltip } from 'antd';\nimport TextArea from 'antd/lib/input/TextArea';\nimport pluralize from 'pluralize';\nimport scopedEval from '../../utils/scopedEval';\nimport getErrorMessage from '../../utils/getErrorMessage';\nimport _, { isObjectLike } from 'lodash';\nimport axios from 'axios';\nimport Text from 'antd/lib/typography/Text';\nimport Paragraph from 'antd/lib/typography/Paragraph';\nimport styles from './JsEvaluatorPage.module.scss';\nimport OutputMode from './types/OutputMode';\nimport CopyButton from '../../components/copyButton/CopyButton';\nimport { BeforeMount } from '@monaco-editor/react';\nimport { editor } from 'monaco-editor';\nimport classNames from 'classnames';\nimport AppEditor from '../../components/appEditor/AppEditor';\nimport monacoExtraLibs from '../../utils/monaco/monacoExtraLibs';\nimport moment from 'moment';\nimport NpmLink from '../../components/NpmLink';\nimport Flex from '../../components/flex/Flex';\nimport LabeledSwitch from '../../components/labeledSwitch/LabeledSwitch';\nimport { useDebounce, useLocalstorageState } from 'rooks';\nimport getLocalStorageKey from '../../utils/getLocalStorageKey';\nimport JsObjectViewer from '../../components/jsObjectViewer/JsObjectViewer';\nimport useStateChangeByEventHandler from '../../hooks/useStateChangeByEventHandler';\n\ninterface ShowCountProps {\n    formatter: (args: { count: number; maxLength?: number }) => string;\n}\n\nconst textAreaShowCount: ShowCountProps = {\n    formatter: ({ count }) => pluralize('character', count, true)\n};\n\nconst codeEditorOptions: editor.IStandaloneEditorConstructionOptions = {\n    fontFamily: 'JetBrains Mono',\n    minimap: { enabled: false }\n};\n\nconst handleCodeEditorBeforeMount: BeforeMount = (monaco) => {\n    monaco.languages.typescript.javascriptDefaults.addExtraLib(`\ndeclare const $value: string;`);\n    monacoExtraLibs.lodash(monaco);\n    monacoExtraLibs.axios(monaco);\n    monacoExtraLibs.pluralize(monaco);\n    monacoExtraLibs.moment(monaco);\n};\n\nconst JsEvaluatorPage = () => {\n    const [$value, set$Value] = useLocalstorageState<string>(getLocalStorageKey('javascript-eval', '$value'), '');\n    const set$ValueByEvent = useStateChangeByEventHandler(set$Value);\n    const [jsSource, setJsSource] = useLocalstorageState<string>(getLocalStorageKey('javascript-eval', 'jsSource'), '');\n    const [evaluatedJs, setEvaluatedJs] = useState<MutableRefObject<unknown>>();\n    const [evaluatedJsString, setEvaluatedJsString] = useState<string>('');\n    const [isAutoEval, setIsAutoEval] = useLocalstorageState<boolean>(\n        getLocalStorageKey('javascript-eval', 'isAutoEval'),\n        true\n    );\n\n    const [outputMode, setOutputMode] = useLocalstorageState<OutputMode>(\n        getLocalStorageKey('javascript-eval', 'outputMode'),\n        OutputMode.TEXT\n    );\n\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n\n    const evaluateJsDangerous = useCallback(async (evalValue: string, $value: string) => {\n        if (!evalValue) {\n            setEvaluatedJs(undefined);\n            setEvaluatedJsString('');\n            return;\n        }\n\n        setIsLoading(true);\n\n        const evalResult = await scopedEval(evalValue, {\n            $value,\n            _,\n            axios,\n            pluralize,\n            moment,\n            $easterEgg: '🥚'\n        });\n\n        if (outputMode === OutputMode.CONSOLE) {\n            console.log(evalResult);\n        }\n\n        setEvaluatedJs({ current: evalResult });\n\n        const evalResultString = isObjectLike(evalResult)\n            ? JSON.stringify(evalResult, undefined, 2)\n            : String(evalResult);\n\n        setEvaluatedJsString(evalResultString);\n    }, []);\n\n    const handleJsError = useCallback((error) => {\n        notification.error({\n            message: error?.constructor.name ?? 'Error',\n            description: getErrorMessage(error)\n        });\n\n        if (outputMode === OutputMode.CONSOLE) {\n            console.error(error);\n        }\n    }, []);\n\n    const evaluateJs = useCallback(async () => {\n        try {\n            await evaluateJsDangerous(jsSource, $value);\n        } catch (error) {\n            handleJsError(error);\n        } finally {\n            setIsLoading(false);\n        }\n    }, [evaluateJsDangerous, handleJsError, jsSource, $value]);\n\n    const handleEveryEvalValueChange = useCallback(async (evalValue: string, $value: string) => {\n        try {\n            await evaluateJsDangerous(evalValue, $value);\n        } catch (error) {\n            if (!(error instanceof ReferenceError || error instanceof SyntaxError || error instanceof TypeError)) {\n                handleJsError(error);\n            }\n\n            // ignored\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    const handleEvalValueChange = useDebounce(handleEveryEvalValueChange, 300);\n\n    useEffect(() => {\n        if (!isAutoEval) {\n            return;\n        }\n\n        handleEvalValueChange(jsSource, $value);\n    }, [isAutoEval, jsSource, $value]);\n\n    return (\n        <PageContainer title=\"JavaScript Evaluator\" className={styles.container}>\n            <Flex col gap={8} minHeight=\"100%\" maxHeight=\"100%\">\n                <Col className={styles.valueContainer}>\n                    <TextArea\n                        rows={6}\n                        allowClear\n                        showCount={textAreaShowCount}\n                        value={$value}\n                        onChange={set$ValueByEvent}\n                        className={classNames('mb-3', styles.textarea)}\n                        placeholder=\"$value\"\n                        id=\"$value-textarea\"\n                    />\n                </Col>\n                <Flex col className={styles.codeContainer}>\n                    <Flex col flex={1} className={styles.codeEditorContainer}>\n                        <Text>\n                            <Paragraph className=\"mb-1\">Evaluate JavaScript</Paragraph>\n                            <Paragraph className=\"mb-2\">\n                                Available variables:{' '}\n                                <Tooltip title=\"The string above\">\n                                    <label htmlFor=\"$value-textarea\">\n                                        <code>$value</code>\n                                    </label>\n                                </Tooltip>\n                                {', '}\n                                <NpmLink packageName=\"lodash\">_</NpmLink>\n                                {', '}\n                                <NpmLink packageName=\"axios\" />\n                                {', '}\n                                <NpmLink packageName=\"pluralize\" />\n                                {', '}\n                                <NpmLink packageName=\"moment\" />\n                            </Paragraph>\n                        </Text>\n\n                        {/*<TextArea className=\"font-monospace mt-1\" $value={jsSource} onChange={setEvalValueByEvent} />*/}\n                        <AppEditor\n                            defaultLanguage=\"javascript\"\n                            className={classNames('mt-1', styles.codeEditor)}\n                            value={jsSource}\n                            onChange={setJsSource}\n                            options={codeEditorOptions}\n                            beforeMount={handleCodeEditorBeforeMount}\n                        />\n                    </Flex>\n                    <Row className=\"mt-1 mb-2 d-flex justify-content-between\">\n                        <Flex row gap={10} align=\"center\">\n                            <Button type=\"primary\" onClick={evaluateJs}>\n                                Evaluate\n                            </Button>\n                            <LabeledSwitch checked={isAutoEval} onChange={setIsAutoEval}>\n                                Auto\n                            </LabeledSwitch>\n                        </Flex>\n                        <Select className={styles.outputModeComboBox} value={outputMode} onChange={setOutputMode}>\n                            <Select.Option key={OutputMode.VIEW}>View</Select.Option>\n                            <Select.Option key={OutputMode.TEXT}>Text</Select.Option>\n                            <Select.Option key={OutputMode.HTML}>HTML</Select.Option>\n                            <Select.Option key={OutputMode.TABLE}>Table</Select.Option>\n                            <Select.Option key={OutputMode.CONSOLE}>Console</Select.Option>\n                        </Select>\n                    </Row>\n                </Flex>\n                <Flex col className={styles.resultContainerWrapper}>\n                    <Spin spinning={isLoading} delay={10} className={styles.resultContainer}>\n                        {outputMode === OutputMode.VIEW && evaluatedJs !== undefined && (\n                            <JsObjectViewer value={evaluatedJs.current} />\n                        )}\n                        {outputMode === OutputMode.TEXT && (\n                            <Col>\n                                <TextArea\n                                    className={classNames('font-monospace mb-2', styles.textarea)}\n                                    readOnly\n                                    value={evaluatedJsString}\n                                    rows={6}\n                                />\n                                <CopyButton value={evaluatedJsString} />\n                            </Col>\n                        )}\n                        {outputMode === OutputMode.HTML && (\n                            <div dangerouslySetInnerHTML={{ __html: evaluatedJsString }} />\n                        )}\n                        {outputMode === OutputMode.TABLE && <Text type=\"secondary\">Coming Soon</Text>}\n                        {outputMode === OutputMode.CONSOLE && <div>The output is in your browser console</div>}\n                    </Spin>\n                </Flex>\n            </Flex>\n        </PageContainer>\n    );\n};\n\nexport default JsEvaluatorPage;\n","const getNpmPackageLink = (packageName: string): string => `https://www.npmjs.com/package/${packageName}`;\n\nexport default getNpmPackageLink;\n","import { MutableRefObject, RefObject } from 'react';\nimport { isNil } from 'lodash';\nimport NonNil from '../types/common/NonNil';\nimport Nil from '../types/common/Nil';\n\ntype AnyRefObject<T> = RefObject<T> | MutableRefObject<T>;\n\ntype ExtractRefType<R extends AnyRefObject<unknown>> = R extends AnyRefObject<infer T> ? T : never;\n\nfunction processRef<R extends MutableRefObject<unknown>, V1>(\n    ref: R,\n    handler: (value: NonNil<ExtractRefType<R>>) => V1\n): V1 | undefined;\nfunction processRef<R extends MutableRefObject<unknown>, V1, V2>(\n    ref: R,\n    handler: (value: NonNil<ExtractRefType<R>>) => V1,\n    nilHandler: (value: Extract<ExtractRefType<R>, Nil>) => V2\n): V1 | V2;\nfunction processRef<R extends MutableRefObject<unknown>, V1, V2>(\n    ref: R,\n    handler: (value: NonNil<ExtractRefType<R>>) => V1,\n    nilHandler?: (value: Extract<ExtractRefType<R>, Nil>) => V2\n): V1 | V2 | undefined {\n    if (isNil(ref.current)) {\n        if (!nilHandler) {\n            return undefined;\n        }\n\n        return nilHandler(ref.current as Extract<ExtractRefType<R>, Nil>);\n    }\n\n    return handler(ref.current as NonNil<ExtractRefType<R>>);\n}\n\nexport default processRef;\n\n// TRASH\n\n// type RefsToValues<Refs extends Array<MutableRefObject<any>>> =\n//     Refs extends [infer RefType, ...infer RestRefTypes]\n//         ? RefType extends MutableRefObject<infer Type>\n//             ? RestRefTypes extends Array<MutableRefObject<any>>\n//                 ? [NotNil<Type>, ...RefsToValues<RestRefTypes>]\n//                 : [1]\n//             : [2]\n//         : [];\n\n// type TestA = RefsToValues<[MutableRefObject<number | undefined>]>;\n\n// const handleRefs = <Refs extends Array<MutableRefObject<any>>>(refs: Refs, handler: (values: RefsToValues<Refs>) => void): void => {\n//     const values = [];\n//     for (const ref of refs) {\n//         if (isNil(ref.current)) {\n//             return;\n//         }\n//\n//         values.push(ref.current);\n//     }\n//\n//     handler(values as RefsToValues<Refs>);\n// };\n\n// type UndefinedLike = undefined | void | never;\n\n// type Voidy<T extends unknown | UndefinedLike> =\n//     Extract<T, UndefinedLike> extends never\n//         ? never\n//         : T;\n// T extends infer V | UndefinedLike\n//     ? V extends UndefinedLike\n//         ? never\n//         : T\n//     : never;\n\n// type Simplify<T> =\n//     T extends infer T1 | void | undefined\n//         ? T1 extends never\n//             ? T\n//             : Exclude<T, void> | undefined\n//         : T;\n// T extends undefined\n//     ? T extends void\n//         ? T extends void & undefined\n//             ? Exclude<T, void> | undefined\n//         : 2\n//     : 3\n// : 4;\n// T extends infer R | undefined | void\n//     ? R | undefined\n//     : T extends infer R | undefined\n//         ? R extends never\n//             ? void\n//         : T\n//     : T;\n","const scopedEval = (expression: string, context: object = {}) => {\n    const evaluator = Function.apply(null, [\n        ...Object.keys(context),\n        'expression',\n        'return eval(\"expression = undefined;\" + expression)'\n    ]);\n    return evaluator.apply(null, [...Object.values(context), expression]);\n};\n\nexport default scopedEval;\n"],"names":["NpmLink","packageName","plain","children","link","getNpmPackageLink","text","href","React","setState","useCallback","callback","event","target","value","OutputMode","createAddTypes","monaco","add","contents","typesLocation","languages","typescript","javascriptDefaults","addExtraLib","addLibrary","importedTypes","default","custom","MonacoExtraLibs","lodash","addTypes","axios","pluralize","moment","realSwitchPropsNames","switchPropNames","props","useMemo","switchProps","pick","className","classNames","styles","switchClassName","style","switchStyle","labelProps","omit","isDarkMode","useAppTheme","containerRef","useRef","objectViewerRef","useDidMount","container","current","Error","LunaObjectViewer","theme","accessGetter","unenumerable","useEffect","processRef","objectViewer","set","setOption","ref","textAreaShowCount","formatter","count","codeEditorOptions","fontFamily","minimap","enabled","handleCodeEditorBeforeMount","monacoExtraLibs","useLocalstorageState","getLocalStorageKey","$value","set$Value","set$ValueByEvent","useStateChangeByEventHandler","jsSource","setJsSource","useState","evaluatedJs","setEvaluatedJs","evaluatedJsString","setEvaluatedJsString","isAutoEval","setIsAutoEval","outputMode","setOutputMode","isLoading","setIsLoading","evaluateJsDangerous","evalValue","undefined","scopedEval","_","$easterEgg","evalResult","console","log","evalResultString","isObjectLike","JSON","stringify","String","handleJsError","error","notification","message","constructor","name","description","getErrorMessage","evaluateJs","handleEveryEvalValueChange","ReferenceError","SyntaxError","TypeError","handleEvalValueChange","useDebounce","PageContainer","title","Flex","col","gap","minHeight","maxHeight","TextArea","rows","allowClear","showCount","onChange","placeholder","id","flex","Text","Paragraph","htmlFor","AppEditor","defaultLanguage","options","beforeMount","row","align","type","onClick","checked","spinning","delay","readOnly","CopyButton","dangerouslySetInnerHTML","__html","handler","nilHandler","isNil","expression","context","evaluator","Function","apply","Object","keys","values"],"sourceRoot":""}