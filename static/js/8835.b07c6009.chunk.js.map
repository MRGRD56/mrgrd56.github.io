{"version":3,"file":"static/js/8835.b07c6009.chunk.js","mappings":"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","sources":["utils/camelizeKeys.ts","actions/api/appAxios.ts","webpack://mrgrd56.github.io/./src/pages/userInfoPage/UserInfoPage.module.scss?badc","actions/ipapi.co/api/getUserInfo.ts","pages/userInfoPage/UserInfoPage.tsx","utils/getErrorMessage.ts","utils/getScaledScreenSize.ts","utils/getScreenSize.ts"],"sourcesContent":["import { camelCase, isNil } from 'lodash';\n\n//https://stackoverflow.com/a/50620653/14899408\n\nconst camelizeKeys = (obj: any): any => {\n    if (Array.isArray(obj)) {\n        return obj.map((v) => camelizeKeys(v));\n    } else if (!isNil(obj) && obj.constructor === Object) {\n        return Object.keys(obj).reduce(\n            (result, key) => ({\n                ...result,\n                [camelCase(key)]: camelizeKeys(obj[key])\n            }),\n            {}\n        );\n    }\n    return obj;\n};\n\nexport default camelizeKeys;\n","import axios, { AxiosInstance } from 'axios';\nimport call from '../../utils/call';\nimport camelizeKeys from '../../utils/camelizeKeys';\n\nconst appAxios = call<AxiosInstance>(() => {\n    const instance = axios.create();\n\n    instance.interceptors.response.use((response) => {\n        response.data = camelizeKeys(response.data);\n        return response;\n    });\n\n    return instance;\n});\n\nexport default appAxios;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"UserInfoPage_container__mTKFo\",\"ipAddress\":\"UserInfoPage_ipAddress__L5ZHe\",\"ipAddressSkeleton\":\"UserInfoPage_ipAddressSkeleton__lauWf\",\"locationSkeleton\":\"UserInfoPage_locationSkeleton__V3kiY\",\"ipDataProviderSkeleton\":\"UserInfoPage_ipDataProviderSkeleton__eZseP\"};","import { UserIpInfo } from '../../../types/ipapi.co';\nimport appAxios from '../../api/appAxios';\n\nconst getUserInfo = async (): Promise<UserIpInfo> => {\n    const response = await appAxios.get<UserIpInfo>('https://ipapi.co/json/');\n    return response.data;\n};\n\nexport default getUserInfo;\n","import React, { FunctionComponent } from 'react';\r\nimport PageContainer from '../../layouts/pages/pageContainer/PageContainer';\r\nimport Text from 'antd/lib/typography/Text';\r\nimport { Button, Col, notification, Skeleton, Space, Tag, Tooltip } from 'antd';\r\nimport styles from './UserInfoPage.module.scss';\r\nimport useAsync from '../../hooks/useAsync';\r\nimport getUserInfo from '../../actions/ipapi.co/api/getUserInfo';\r\nimport getErrorMessage from '../../utils/getErrorMessage';\r\nimport ExternalLink from '../../components/ExternalLink';\r\nimport getScreenSize from '../../utils/getScreenSize';\r\nimport getScaledScreenSize from '../../utils/getScaledScreenSize';\r\nimport { ReloadOutlined } from '@ant-design/icons';\r\nimport Flex from '../../components/flex/Flex';\r\n\r\nconst UserInfoPage: FunctionComponent = () => {\r\n    const {\r\n        result: userIpInfo,\r\n        isLoading: isUserIpInfoLoading,\r\n        error: userIpInfoError,\r\n        invoke: fetchUserInfo\r\n    } = useAsync(getUserInfo, {\r\n        doInvokeOnMount: true,\r\n        onError: (error) => {\r\n            console.error(error);\r\n            notification.error({\r\n                message: 'An error occurred while getting the IP address',\r\n                description: getErrorMessage(error)\r\n            });\r\n        },\r\n        onSuccess: console.log\r\n    });\r\n\r\n    const browserLanguages = window.navigator.languages;\r\n    const realScreenSize = getScaledScreenSize();\r\n    const screenSize = getScreenSize();\r\n    const scale = window.devicePixelRatio;\r\n    const screenOrientation = window.screen.orientation.type;\r\n    const { userAgent } = navigator;\r\n\r\n    return (\r\n        <PageContainer\r\n            title={\r\n                <Flex row gap={3}>\r\n                    <div>User Info</div>\r\n                    <Button size=\"small\" type=\"link\" onClick={fetchUserInfo}>\r\n                        <ReloadOutlined />\r\n                    </Button>\r\n                </Flex>\r\n            }\r\n        >\r\n            <Col className={styles.container}>\r\n                {!userIpInfoError && (\r\n                    <Space direction=\"vertical\" className=\"mb-2\">\r\n                        {isUserIpInfoLoading ? (\r\n                            <>\r\n                                <Skeleton.Input active className={styles.ipAddressSkeleton} />\r\n                                <Skeleton.Input active className={styles.locationSkeleton} />\r\n                                <Skeleton.Input active className={styles.ipDataProviderSkeleton} />\r\n                            </>\r\n                        ) : (\r\n                            userIpInfo && (\r\n                                <>\r\n                                    <Text strong className={styles.ipAddress}>\r\n                                        <Text strong>IP: </Text>\r\n                                        <Text copyable>{userIpInfo.ip}</Text>\r\n                                    </Text>\r\n                                    <Text className=\"d-flex align-items-center\">\r\n                                        <Text strong>Location:</Text>\r\n                                        <img\r\n                                            className=\"ms-2\"\r\n                                            src={`https://purecatamphetamine.github.io/country-flag-icons/3x2/${userIpInfo.country}.svg`}\r\n                                            alt={userIpInfo.country}\r\n                                            height={12}\r\n                                            width={18}\r\n                                        />{' '}\r\n                                        {/*TODO: Extract into separate component*/}\r\n                                        <Text className=\"ms-1\">\r\n                                            {userIpInfo.countryName}, {userIpInfo.city}\r\n                                        </Text>\r\n                                    </Text>\r\n                                    <Text type=\"secondary\">\r\n                                        The data is provided by{' '}\r\n                                        <ExternalLink href=\"https://ipapi.co/\">ipapi.co</ExternalLink>\r\n                                    </Text>\r\n                                </>\r\n                            )\r\n                        )}\r\n                    </Space>\r\n                )}\r\n                <Text>\r\n                    <Text strong>Browser languages:</Text>\r\n                    <Text className=\"ms-2\">\r\n                        {browserLanguages.map((language, index) =>\r\n                            index === 0 ? (\r\n                                <Tooltip title=\"Your primary language\" placement=\"bottom\" key={index}>\r\n                                    <Tag color=\"gold\">{language}</Tag>\r\n                                </Tooltip>\r\n                            ) : (\r\n                                <Tag color=\"default\" key={index}>\r\n                                    {language}\r\n                                </Tag>\r\n                            )\r\n                        )}\r\n                    </Text>\r\n                </Text>\r\n                <Text>\r\n                    <Text strong>Screen size:</Text>\r\n                    <Text className=\"ms-2\">\r\n                        {realScreenSize.width}x{realScreenSize.height}\r\n                    </Text>\r\n                    {scale !== 1 && (\r\n                        <Text className=\"ms-1\" type=\"secondary\">\r\n                            ({screenSize.width}x{screenSize.height} * {scale})\r\n                        </Text>\r\n                    )}\r\n                </Text>\r\n                <Text>\r\n                    <Text strong>Pixel ratio:</Text>\r\n                    <Text className=\"ms-2\">{scale}</Text>\r\n                </Text>\r\n                <Text>\r\n                    <Text strong>Orientation:</Text>\r\n                    <Text className=\"ms-2\">{screenOrientation}</Text>\r\n                </Text>\r\n                <Text>\r\n                    <Text strong>User Agent:</Text>\r\n                    <Text className=\"ms-2\">{userAgent}</Text>\r\n                </Text>\r\n            </Col>\r\n        </PageContainer>\r\n    );\r\n};\r\n\r\nexport default UserInfoPage;\r\n","const getErrorMessage = (error: any) => {\n    return error instanceof Error ? error.message : String(error);\n};\n\nexport default getErrorMessage;\n","import { Size } from '../types';\nimport { round } from 'lodash';\n\nconst getScaledScreenSize = (): Size => {\n    const { devicePixelRatio } = window;\n    const { width, height } = window.screen;\n\n    return {\n        width: round(width * devicePixelRatio),\n        height: round(height * devicePixelRatio)\n    };\n};\n\nexport default getScaledScreenSize;\n","import { Size } from '../types';\nimport { pick } from 'lodash';\n\nconst getScreenSize = (): Size => pick(window.screen, ['width', 'height']);\n\nexport default getScreenSize;\n"],"names":["camelizeKeys","obj","Array","isArray","map","v","isNil","constructor","Object","keys","reduce","result","key","camelCase","call","instance","axios","interceptors","response","use","data","getUserInfo","appAxios","useAsync","doInvokeOnMount","onError","error","console","notification","message","description","getErrorMessage","onSuccess","log","userIpInfo","isUserIpInfoLoading","isLoading","userIpInfoError","fetchUserInfo","invoke","browserLanguages","window","navigator","languages","realScreenSize","getScaledScreenSize","screenSize","getScreenSize","scale","devicePixelRatio","screenOrientation","screen","orientation","type","userAgent","PageContainer","title","Flex","row","gap","size","onClick","ReloadOutlined","className","styles","direction","active","Text","strong","copyable","ip","src","country","alt","height","width","countryName","city","ExternalLink","href","language","index","placement","color","Error","String","round","pick"],"sourceRoot":""}